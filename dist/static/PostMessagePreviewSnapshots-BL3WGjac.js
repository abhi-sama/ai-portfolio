import{cd as $,ce as y,r as o,c as I,bJ as M,bx as U,d3 as j,cC as D,d4 as F,cQ as O,cI as C,d5 as J,bk as k,d2 as L,d6 as N,c$ as Q,i as T,d7 as V}from"./sanity-CcdgtkEi.js";function W(s){return $(function(e,t){var r=!1,a=0;e.subscribe(y(t,function(i){return(r||(r=!s(i,a++)))&&t.next(i)}))})}const q=s=>{const e=I.c(16),{comlink:t,refs:r,perspective:a}=s,i=M(),c=U();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=new j,e[0]=p):p=e[0];const g=p;let u;e[1]!==i||e[2]!==a||e[3]!==c?(u=g.asObservable().pipe(D(w=>F(w.map(n=>{const P={...n,_id:O(n._id)},x=a==="published"?C:i.observeForPreview(P,c.get(P._type)).pipe(J(),W(z)),E={...n,_id:k(n._id)},R=i.observeForPreview(E,c.get(E._type));return L(R.pipe(N(x)),x).pipe(Q(A),T(B))}))),V(0)),e[1]=i,e[2]=a,e[3]=c,e[4]=u):u=e[4];const l=u;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[5]=d):d=e[5];const S=o.useRef(d);let m,b;e[6]!==t||e[7]!==l?(m=()=>{const w=l.subscribe(n=>{t.post("presentation/preview-snapshots",{snapshots:n}),S.current=n});return()=>{w.unsubscribe()}},b=[t,l],e[6]=t,e[7]=l,e[8]=m,e[9]=b):(m=e[8],b=e[9]),o.useEffect(m,b);let f,h;e[10]!==t?(f=()=>t.on("visual-editing/preview-snapshots",()=>({snapshots:S.current})),h=[t],e[10]=t,e[11]=f,e[12]=h):(f=e[11],h=e[12]),o.useEffect(f,h);let v,_;return e[13]!==r?(v=()=>{g.next(r)},_=[r,g],e[13]=r,e[14]=v,e[15]=_):(v=e[14],_=e[15]),o.useEffect(v,_),null};var H=o.memo(q);function z(s){return s.snapshot===null}function A(s){return!!s.snapshot}function B(s){const e=s.snapshot;return{_id:k(e._id),title:e.title,subtitle:e.subtitle,description:e.description,imageUrl:e.imageUrl}}export{H as default};
